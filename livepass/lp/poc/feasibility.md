# Livepass-LP フィージビリティ調査書

## 1. 技術的実現可能性の総括

### デバイス別対応状況
| 検知項目 | PC | スマホ | 実装方針 |
|---------|-----|--------|----------|
| スクロール停止・往復 | ◎ | ◎ | 標準実装可能 |
| 同一要素の複数クリック | ◎ | ◎ | カウント機能で対応 |
| フォームエラー繰り返し | ◎ | ◎ | エラーイベント監視 |
| ホバー時間計測 | ◎ | × | PCのみ対応 |
| 無操作時間検知 | ◎ | ◎ | タイマー実装 |

### 結論
- **スマホ**：スクロール検知を中心に設計（ホバーは非対応）
- **PC**：全機能実装可能
- **共通**：クリック回数、フォームエラーは問題なく実装可能

## 2. LLM応答速度の課題と対策

### 現状の課題
- LLM直接呼び出し：1-3秒の遅延
- ユーザビリティ的に2秒以内が必須

### 解決策
1. **クライアント情報の事前提供**
   - クライアント企業から商品情報・FAQ・想定質問を事前収集
   - 正確な情報に基づくアシスト内容の生成
   - LLM依存度を下げて高速化

2. **段階的表示**
   - まず固定メッセージ表示
   - 必要に応じてLLM応答で補完

## 3. ページ遷移時の対応

### 実装方法と挙動
- **親ページでスクリプト読み込み**：全ページで自動的に動作継続
- **SPA（シングルページアプリ）**：問題なく追跡可能
- **通常の画面遷移**：新規ページでも動作（親で読み込み済みなら）

### データ取得範囲
| 取得方式 | メリット | デメリット | 推奨度 |
|----------|--------|------------|---------|
| 現在ページのみ | 軽量・高速 | コンテキスト不足 | △ |
| サイト全体 | 包括的理解 | 重い・複雑 | × |
| **現在＋履歴** | バランス良 | - | ◎ |

### 推奨アプローチ
- 現在表示中のページ内容を中心に解析
- ユーザーの閲覧履歴（3ページ分）を保持
- これにより適切なコンテキストで提案可能

## 4. データ取得精度

### 取得可能情報
- **DOM/テキスト**：95%以上の精度
- **フォーム構造**：90%以上
- **個人情報**：取得しない（プライバシー保護）

### 制約事項
- Shadow DOM内は取得制限
- 動的生成コンテンツは遅延対応
- iframeコンテンツは取得不可

## 5. 主要リスクと対策

| リスク | 対策 |
|--------|------|
| LLM応答遅延 | クライアント情報活用＋キャッシュ |
| 誤検知 | 閾値調整＋企業別カスタマイズ |
| パフォーマンス影響 | 非同期処理＋軽量スクリプト |